parameters:
  tools: []

steps:
  - task: TerraformInstaller@0
    condition: and(succeeded(), contains(parameters.tools, 'terraform'))
    inputs:
      terraformVersion: 'latest'
    displayName: 'Install Terraform'

  - script: |
      echo "Installing Terragrunt..."
      sudo curl -L https://github.com/gruntwork-io/terragrunt/releases/latest/download/terragrunt_linux_amd64 -o /usr/local/bin/terragrunt
      sudo chmod +x /usr/local/bin/terragrunt
      terragrunt --version
    condition: and(succeeded(), contains(parameters.tools, 'terragrunt'))
    displayName: 'Install Terragrunt'
